<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="description" content="A horizon visibility calculator to show how much of a distant object is hidden by Earth's curvature">

  <!-- iOS meta tags & icons -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="Beyond Horizon Calculator">
  <link rel="apple-touch-icon" href="/icons/Icon-192.png">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/favicon.png"/>

  <title>Beyond Horizon Calculator</title>
  <link rel="manifest" href="/manifest.json">

  <script>
    // Log current URL info for debugging
    console.log('Protocol:', window.location.protocol);
    console.log('Hostname:', window.location.hostname);
    console.log('Pathname:', window.location.pathname);
    
    // Determine if we're on GitHub Pages
    const isGitHubPages = window.location.hostname === 'zartyblartfast.github.io';
    const basePath = isGitHubPages ? '/beyondHorizonCalc' : '';
    
    // Log the base path
    console.log('Base path:', basePath);
    
    // Function to get correct asset path
    function getAssetPath(path) {
      return basePath + path;
    }
  </script>
</head>
<body>
  <script>
    // Dynamically create and load flutter.js
    const script = document.createElement('script');
    script.src = getAssetPath('/flutter.js');
    script.defer = true;
    script.onload = function() {
      console.log('Flutter.js loaded successfully');
      window._flutter.loader.loadEntrypoint({
        onEntrypointLoaded: async function(engineInitializer) {
          console.log('Flutter engine initializer loaded');
          try {
            const appRunner = await engineInitializer.initializeEngine({
              assetBase: getAssetPath('')
            });
            console.log('Flutter engine initialized');
            await appRunner.runApp();
            console.log('Flutter app started');
          } catch (error) {
            console.error('Error running Flutter app:', error);
          }
        }
      });
    };
    script.onerror = function(error) {
      console.error('Error loading flutter.js:', error);
    };
    document.body.appendChild(script);
  </script>
</body>
</html>
